// sentry-bundle.tracing.min.js
(function () {
  if (!window.Sentry) {
    console.warn("[Sentry] SDK not loaded");
    return;
  }

  Sentry.init({
    dsn: 'https://...ton-dsn...ingest.sentry.io/...',
    integrations: [new Sentry.BrowserTracing()],
    tracesSampleRate: 0.1,
    debug: true,
    beforeSend(event, hint) {
      const error = hint.originalException;
      if (error && typeof error.message === 'string' && error.message.includes("Test de vérification manuelle Sentry")) {
        console.warn("⛔ Erreur de test ignorée :", error.message);
        return null;
      }
      return event;
    },
    environment: 'production', // Set default, override in theme.liquid if needed
  });
  // Sentry.setUser should be called from theme.liquid with customer context

  console.log("✅ Sentry initialized");
})();